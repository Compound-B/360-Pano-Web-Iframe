TWP.Module=TWP.Module||{};(function(a){a.fn.stickyNav=function(b){var c=b||{},j=a(this.selector),d=(c.target&&a(c.target))||a(j.data("target")),l=[],e=c.speed||j.data("speed")||450,k=c.offset||j.data("offset")||0,f=c.click_override||j.data("click_override")||false,h=false;var m=function(){c.offset_top=j.parent().offset()&&j.parent().offset().top;c.height=j.outerHeight();if(!f){j.find("a").each(function(p,n){var o=a(n).attr("href");if(o.substr(0,1)==="#"&&a(o).length>0){l.push(a(o))}})}j.css({position:"absolute",width:j.parent().width(),top:0}).parent().css({height:c.height});i();if(!f){g()}},i=function(){a(window).scroll(function(){var n=a(window).scrollTop();target_ht=d.height();target_offset=d.offset().top;c.offset_top=j.parent().offset()&&j.parent().offset().top;c.height=j.outerHeight();if(n<c.offset_top||c.height+c.offset_top>target_ht+target_offset){j.css({position:"absolute",top:0}).removeClass("fixed")}else{if(n>=target_ht+target_offset-c.height+k){var o=target_ht+target_offset-c.height-c.offset_top+k;j.css({position:"absolute",top:o}).addClass("fixed")}else{if(n>=c.offset_top){j.css({position:"fixed",top:0}).addClass("fixed")}}}if(!h){a.each(l,function(p,q){var r=a(q).offset()&&a(q).offset().top;if(r+k<=n||p===0){j.find("a").eq(p).addClass("active").siblings(".active").removeClass("active")}})}})},g=function(){j.on("click","a",function(p){p.preventDefault();a(this).addClass("active").siblings(".active").removeClass("active");var n=a(a(this).attr("href"));if(n.offset()){h=true;var o=n.offset().top;a("html, body").stop().animate({scrollTop:o+k},e,function(){h=false})}})};m()}})(jQuery);