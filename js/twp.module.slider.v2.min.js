TWP.Module=TWP.Module||{},function(a){TWP.Module.Slider=function(b){var c=b,d=c.orientation||"horizontal",e="horizontal"==d?["left","right","width"]:["top","bottom","height"],f=!1,g=!1,h=!1,i=!0;"undefined"==typeof c.cue_animation||"true"==c.cue_animation?c.cue_animation=!0:"false"==c.cue_animation&&(c.cue_animation=!1);var j=['<div class="controller franklin">','<div class="handle-arrows">','<div class="handle-arrow handle-arrow-'+e[0]+'"></div>','<div class="handle-arrow handle-arrow-'+e[1]+'"></div>',"</div>",'<div class="content-scroll">','<div class="divider"></div>',"</div>",'<div class="handle"></div>','<strong class="ui-direction">Slide</strong>',"</div>"].join(""),k=a(c.wrapper);k.children("div");var m="width";switch(d){case"horizontal":m="width";break;case"vertical":m="height"}var n="blue";"undefined"!=typeof c.theme_color&&"dark"==c.theme_color?n="dark":"undefined"!=typeof c.theme_color&&"light"==c.theme_color&&(n="light");var o=k[m](),p=c.start_pos?o*Number(c.start_pos):o/2,q=function(a,b){var d=k[m](),e=null===a?c.start_pos?d*Number(c.start_pos):d/2:a;if(i){i=!1;var f=b?Math.abs(a-p)/1.5:1,g="width"===m?"left":"top",h={};h[g]=e+"px",k.children(".controller").animate(h,f,"easeInOutCirc");var h={};h[m]=e,k.children(".slide-content").eq(1).animate(h,f,"easeInOutCirc",function(){i=!0})}p=e},r=function(){k.addClass("wp-slider").addClass("wp-slider-"+n).addClass("wp-slider-"+d).append(j),k.find(".handle-arrows").css({opacity:0}),s(),u(),v(),a("#content").css("overflow","visible"),q(null,!0),k.addTouch()},s=function(){for(var a=0,b=c.content.length-1;b>=0;b--){var d=c.content[b],e=a===c.content.length-1,f=k[m](),g="img"===c.content_type?'<img src="'+d+'"'+' style="max-'+m+": "+f+'px" />':d,h=e?"last-slide":"",i=['<div class="slide-content '+h+'">',g,"</div>"].join("");k.append(i);var j=k.find(".slide-content").eq(a);if(c.labels){var l=['<p class="content-label franklin">',"<strong>",c.labels[b],"</strong>","</p>"].join("");j.prepend(l),j.find(".content-label").css("min-"+m,j.find(".content-label")[m]())}a++}},t=function(a){var b="vertical"===d?o-a:a;return b},u=function(){k.slider({orientation:d,range:!1,min:0,max:o,value:p,slide:function(a,b){if(i)if("mousedown"===a.originalEvent.type){var c=t(b.value);q(c,!0)}else{var c=t(b.value);q(c,!0),p=c}},change:function(a,b){try{"keyup"===a.originalEvent.type&&q(b.value)}catch(a){}},start:function(){f=!0},stop:function(){f=!1,g||a(this).mouseleave(),h||a(this).find(".handle").mouseleave()}})},v=function(){k.on("mouseover",function(){g=!0,a(this).find(".handle-arrows").stop().animate({opacity:1},220)}).on("mouseout",function(){g=!1,f||a(this).find(".handle-arrows").stop().animate({opacity:0},200)}),k.find(".controller").on("mouseover",function(){h=!0,a(this).find(".handle").addClass("hover"),k.find(".ui-direction").fadeTo(220,0)}).on("mouseleave",function(){h=!1,f||a(this).find(".handle").removeClass("hover")}).on("mousedown",function(){f=!0}),a(window).smartscroll(function(){c.cue_animation&&!k.hasClass("slider-initialized")&&k.isTopHalfScreen()&&w()})},w=function(){var a="horizontal"==d?k.width():k.height(),b=k.find(".controller").position()[e[0]]/a,c=b>=.5?e[0]:e[1],f=b>=.5?e[1]:e[0],g="margin-"+c,h={},i={};label_props={},label_props["text-align"]=f,label_props[f]="50%",label_props[c]="auto",label_props["margin-"+f]="12px",label_props["margin-"+c]="0px","horizontal"==d?(h[g]="0px",i[g]="-25px"):(h[g]="0px",h["margin-"+f]="0px",i["margin-"+c]="-25px",i["margin-"+f]="25px"),k.addClass("slider-initialized"),k.find(".ui-direction").css(label_props).fadeTo(220,1),k.find(".handle-arrows").stop().animate({opacity:1},220,function(){function b(a,c){c>0&&a.animate(i,500,function(){a.animate(h,500,function(){b(a,c-1)})})}var a=k.find(".handle-arrow-"+c);b(a,3)})};r()},jQuery.extend(jQuery.easing,{easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c}})}(jQuery),function(a,b){function c(a,b,c){var d;return function(){function g(){c||a.apply(e,f),d=null}var e=this,f=arguments;d?clearTimeout(d):c&&a.apply(e,f),d=setTimeout(g,b||300)}}jQuery.fn[b]=function(a){return a?this.bind("scroll",c(a)):this.trigger(b)}}(jQuery,"smartscroll"),function(a,b){a.fn[b]=function(){var b=a(window),c={top:b.scrollTop(),left:b.scrollLeft()};c.right=c.left+b.width(),c.bottom=c.top+b.height();var d=b.height()/2,e={top:c.top,bottom:c.top+d},f=this.offset();return f.right=f.left+this.outerWidth(),f.bottom=f.top+this.outerHeight(),!(c.right<f.left||c.left>f.right||e.bottom<f.top||e.top>f.bottom)}}(jQuery,"isTopHalfScreen");